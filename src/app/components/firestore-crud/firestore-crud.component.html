<!-- <button (click)="addData()">Add Data</button> -->

<!-- <button (click)="getData()">Get Data</button> -->

<button (click)="scrapeStravaData()">Persist new Strava Rides</button>

<button (click)="refreshPerformanceData()">Refresh Performance Data</button>

<p>numStravaApiCallsMade: {{ calls["numStravaApiCallsMade"] }}</p>
<p>numStravaApiCallsDone: {{ calls["numStravaApiCallsDone"] }}</p>
<p>numDbReadsMade: {{ calls["numDbReadsMade"] }}</p>
<p>numDbReadsDone: {{ calls["numDbReadsDone"] }}</p>
<p>numDbWritesMade: {{ calls["numDbWritesMade"] }}</p>
<p>numDbWritesDone: {{ calls["numDbWritesDone"] }}</p>
<p>{{ calls["httpDetails"] }}</p>
<p>{{ calls["databaseMsg"] }}</p>

<p-progressBar [showValue]="showValue" [value]="value" unit=" 4 reads"></p-progressBar>

<h3 class="mt-3">Persist New Strava Rides</h3>

<div class="container-fluid">
  <div class="row">
    <div class="card-deck">
      <div class="card  p-3 m-3">
        <img src="assets/images/strava-bike-landscape.png" class="card-img-top mb-2" alt="..." />

        <h5 class="card-title">Step 1 (Strava API)</h5>
        <h6 class="card-subtitle mb-2 text-muted">Get list of rides from Strava API</h6>
        <p class="card-text">
          Returns summary information for all activities. Used to get complete list of all activity
          IDs.
        </p>
        <a
          href="https://developers.strava.com/docs/reference/#api-Activities-getLoggedInAthleteActivities"
          target="_blank"
          class="card-link"
          >Strava API Documentation</a
        >
      </div>

      <div class="card  p-3 m-3">
        <img src="assets/images/cloud-firestore.png" class="card-img-top mb-2" alt="..." />

        <h5 class="card-title">Step 2 (DB Read)</h5>
        <h6 class="card-subtitle mb-2 text-muted">Check if ride is in the Firestore DB</h6>
        <p class="card-text">
          For each activity returned, check if that activity is a ride (as opposed to a run or gym
          workout) and then make a call to the Firestore database to see if this ride has already
          been saved.
        </p>
      </div>

      <div class="card  p-3 m-3">
        <img src="assets/images/strava-bike-landscape.png" class="card-img-top mb-2" alt="..." />

        <h5 class="card-title">Step 3 (Strava API)</h5>
        <h6 class="card-subtitle mb-2 text-muted">Get Ride details for unsaved rides</h6>
        <p class="card-text">
          For each ride that had not been previously saved in the Firestore DB, get ride details
          (including all segments ridden) from the Strava API.
        </p>
        <a
          href="https://developers.strava.com/docs/reference/#api-Activities-getActivityById"
          target="_blank"
          class="card-link"
          >Strava API Documentation</a
        >
      </div>

      <div class="card p-3 m-3">
        <img src="assets/images/cloud-firestore.png" class="card-img-top mb-2" alt="..." />

        <h5 class="card-title">Step 4 (DB Batch Write)</h5>
        <h6 class="card-subtitle mb-2 text-muted">Save ride and ride segments</h6>
        <p class="card-text">
          For each ride returned from the API in the previous step save the following in a
          transactional batch: the ride, the ride segment efforts and a segment performance
          placeholder for each segment (c. 50-300 per ride).
        </p>
      </div>
    </div>
  </div>
</div>

<h3 class="mt-3">Refresh Performance Data</h3>

<div class="container-fluid">
  <div class="row">
    <div class="card-deck">
      <div class="card m-3 p-3">
        <h5 class="card-title">Step 4 (DB Batch Write)</h5>
        <h6 class="card-subtitle mb-2 text-muted">Save ride and ride's segments</h6>
        <p class="card-text">
          For each ride returned from the API in the previous step save the following in a
          transactional batch: the ride, the ride segment efforts and a segment performance
          placeholder for each segment (c. 50-300 per ride).
        </p>
      </div>
    </div>
  </div>
</div>
